# Basic
data_directory = '/var/lib/postgresql/data'   # 通常は PGDATA が指す場所
listen_addresses = '*'                         # 開発: '*' で外部接続を許可。 本番: 必要なホストのみ指定
port = 5432

# Resource/tuning (開発: moderate safe values)
max_connections = 200
shared_buffers = 256MB        # 本番はホストメモリに合わせて調整（例: total_mem*0.25）
work_mem = 4MB                # 一時ソート/ジョインで使うメモリ（クエリごと）
maintenance_work_mem = 64MB
effective_cache_size = 768MB  # 本番は OS キャッシュ予測値に合わせる

# WAL / durability (開発はデフォルトのままでもOK)
wal_level = replica
max_wal_size = 1GB
min_wal_size = 80MB
checkpoint_timeout = 5min

# Logging (開発時に有益)
logging_collector = on
log_directory = 'pg_log'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
log_min_duration_statement = 500   # 500ms より遅いクエリをログ（開発時）
log_checkpoints = on
log_connections = on
log_disconnections = on

# Authentication files location
# 明示的に指定する場合（今回のマウント配置に合わせて）
hba_file = '/etc/postgresql/pg_hba.conf'
ident_file = '/etc/postgresql/pg_ident.conf'

# Locale / encoding
client_encoding = utf8
lc_messages = 'C'               # or ja_JP.UTF-8 if you prefer
lc_monetary = 'C'
lc_numeric = 'C'
lc_time = 'C'
